{"ast":null,"code":"'use strict';\n\nclass QuickLRU {\n  constructor(options = {}) {\n    if (!(options.maxSize && options.maxSize > 0)) {\n      throw new TypeError('`maxSize` must be a number greater than 0');\n    }\n    this.maxSize = options.maxSize;\n    this.onEviction = options.onEviction;\n    this.cache = new Map();\n    this.oldCache = new Map();\n    this._size = 0;\n  }\n  _set(key, value) {\n    this.cache.set(key, value);\n    this._size++;\n    if (this._size >= this.maxSize) {\n      this._size = 0;\n      if (typeof this.onEviction === 'function') {\n        for (const [key, value] of this.oldCache.entries()) {\n          this.onEviction(key, value);\n        }\n      }\n      this.oldCache = this.cache;\n      this.cache = new Map();\n    }\n  }\n  get(key) {\n    if (this.cache.has(key)) {\n      return this.cache.get(key);\n    }\n    if (this.oldCache.has(key)) {\n      const value = this.oldCache.get(key);\n      this.oldCache.delete(key);\n      this._set(key, value);\n      return value;\n    }\n  }\n  set(key, value) {\n    if (this.cache.has(key)) {\n      this.cache.set(key, value);\n    } else {\n      this._set(key, value);\n    }\n    return this;\n  }\n  has(key) {\n    return this.cache.has(key) || this.oldCache.has(key);\n  }\n  peek(key) {\n    if (this.cache.has(key)) {\n      return this.cache.get(key);\n    }\n    if (this.oldCache.has(key)) {\n      return this.oldCache.get(key);\n    }\n  }\n  delete(key) {\n    const deleted = this.cache.delete(key);\n    if (deleted) {\n      this._size--;\n    }\n    return this.oldCache.delete(key) || deleted;\n  }\n  clear() {\n    this.cache.clear();\n    this.oldCache.clear();\n    this._size = 0;\n  }\n  *keys() {\n    for (const [key] of this) {\n      yield key;\n    }\n  }\n  *values() {\n    for (const [, value] of this) {\n      yield value;\n    }\n  }\n  *[Symbol.iterator]() {\n    for (const item of this.cache) {\n      yield item;\n    }\n    for (const item of this.oldCache) {\n      const [key] = item;\n      if (!this.cache.has(key)) {\n        yield item;\n      }\n    }\n  }\n  get size() {\n    let oldCacheSize = 0;\n    for (const key of this.oldCache.keys()) {\n      if (!this.cache.has(key)) {\n        oldCacheSize++;\n      }\n    }\n    return Math.min(this._size + oldCacheSize, this.maxSize);\n  }\n}\nmodule.exports = QuickLRU;","map":{"version":3,"names":["QuickLRU","constructor","options","maxSize","TypeError","onEviction","cache","Map","oldCache","_size","_set","key","value","set","entries","get","has","delete","peek","deleted","clear","keys","values","Symbol","iterator","item","size","oldCacheSize","Math","min","module","exports"],"sources":["D:/LangChainJS/chatpdf/node_modules/quick-lru/index.js"],"sourcesContent":["'use strict';\n\nclass QuickLRU {\n\tconstructor(options = {}) {\n\t\tif (!(options.maxSize && options.maxSize > 0)) {\n\t\t\tthrow new TypeError('`maxSize` must be a number greater than 0');\n\t\t}\n\n\t\tthis.maxSize = options.maxSize;\n\t\tthis.onEviction = options.onEviction;\n\t\tthis.cache = new Map();\n\t\tthis.oldCache = new Map();\n\t\tthis._size = 0;\n\t}\n\n\t_set(key, value) {\n\t\tthis.cache.set(key, value);\n\t\tthis._size++;\n\n\t\tif (this._size >= this.maxSize) {\n\t\t\tthis._size = 0;\n\n\t\t\tif (typeof this.onEviction === 'function') {\n\t\t\t\tfor (const [key, value] of this.oldCache.entries()) {\n\t\t\t\t\tthis.onEviction(key, value);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.oldCache = this.cache;\n\t\t\tthis.cache = new Map();\n\t\t}\n\t}\n\n\tget(key) {\n\t\tif (this.cache.has(key)) {\n\t\t\treturn this.cache.get(key);\n\t\t}\n\n\t\tif (this.oldCache.has(key)) {\n\t\t\tconst value = this.oldCache.get(key);\n\t\t\tthis.oldCache.delete(key);\n\t\t\tthis._set(key, value);\n\t\t\treturn value;\n\t\t}\n\t}\n\n\tset(key, value) {\n\t\tif (this.cache.has(key)) {\n\t\t\tthis.cache.set(key, value);\n\t\t} else {\n\t\t\tthis._set(key, value);\n\t\t}\n\n\t\treturn this;\n\t}\n\n\thas(key) {\n\t\treturn this.cache.has(key) || this.oldCache.has(key);\n\t}\n\n\tpeek(key) {\n\t\tif (this.cache.has(key)) {\n\t\t\treturn this.cache.get(key);\n\t\t}\n\n\t\tif (this.oldCache.has(key)) {\n\t\t\treturn this.oldCache.get(key);\n\t\t}\n\t}\n\n\tdelete(key) {\n\t\tconst deleted = this.cache.delete(key);\n\t\tif (deleted) {\n\t\t\tthis._size--;\n\t\t}\n\n\t\treturn this.oldCache.delete(key) || deleted;\n\t}\n\n\tclear() {\n\t\tthis.cache.clear();\n\t\tthis.oldCache.clear();\n\t\tthis._size = 0;\n\t}\n\n\t* keys() {\n\t\tfor (const [key] of this) {\n\t\t\tyield key;\n\t\t}\n\t}\n\n\t* values() {\n\t\tfor (const [, value] of this) {\n\t\t\tyield value;\n\t\t}\n\t}\n\n\t* [Symbol.iterator]() {\n\t\tfor (const item of this.cache) {\n\t\t\tyield item;\n\t\t}\n\n\t\tfor (const item of this.oldCache) {\n\t\t\tconst [key] = item;\n\t\t\tif (!this.cache.has(key)) {\n\t\t\t\tyield item;\n\t\t\t}\n\t\t}\n\t}\n\n\tget size() {\n\t\tlet oldCacheSize = 0;\n\t\tfor (const key of this.oldCache.keys()) {\n\t\t\tif (!this.cache.has(key)) {\n\t\t\t\toldCacheSize++;\n\t\t\t}\n\t\t}\n\n\t\treturn Math.min(this._size + oldCacheSize, this.maxSize);\n\t}\n}\n\nmodule.exports = QuickLRU;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}